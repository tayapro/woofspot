{% extends "base.html" %}
{% load allauth i18n %}

{% block head_title %}
{% trans "View Event" %}
{% endblock head_title %}

{% block content %}
<div class="event-card-view rounded-4">
  <div class="row flex-column flex-md-row align-items-stretch m-0 p-0">
    <!-- Event Image -->
    <div class="event-view-image col-12 col-md-4 rounded-4 shadow-sm "
      style="background-image: url('{{ event.image_url }}');">
    </div>
    <!-- Event Details -->
    <div class="card-body col-12 col-md-8 text-black p-5 rounded-4 shadow-sm">
      <div class="d-flex flex-row justify-content-between">
        <div class="flex-grow-1 mb-3">
          <h5 class="card-title mb-3">{{ event.title }}</h5>
          <p class="card-text text-muted mb-0">
          <p class="card-text text-muted mb-0"><strong>Date:</strong> {{ event.event_date }}</p>
          <p class="card-text text-muted mb-0"><strong>Time:</strong>
            {{ event.event_start_time }} - {{ event.event_end_time }}
          </p>
          <p class="card-text text-muted"><strong class="mb-2">Location:</strong> {{ event.location }}</p>
        </div>
        <div class="text-center">
          {% include "icons_container.html" %}
        </div>
      </div>
      <div>
        <span id="content-truncated-{{ event.id }}" class="content-truncated">
          {{ event.content|truncatewords:20 }}
        </span>
        <span id="content-full-{{ event.id }}" class="d-none">
          {{ event.content }}
        </span>
        </p>
        {% if event.content|length > 20 %}
        <a href="#" class="toggle-content text-decoration-none" data-event-id="{{ event.id }}">
          Show More
        </a>
        {% endif %}
      </div>
      <div class="reservation-section bg-warning-subtle mt-4 text-left">
        {% if not is_past_event and user != event.organizer and user_registered %}
        <p>You're planning to be there.</p>
        {% endif %}

        {% if is_past_event and user != event.organizer and user_registered %}
        <p class="mb-0">We hope you enjoyed the event!</p>
        <p>Feel free to rate it and share your feedback.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>



{% if next %}
<div class="m-5 pb-5 text-center">
  <a href="{{ next }}" class="btn btn-outline-secondary rounded-pill pe-5">
    <i class="fa-solid fa-less-than"></i>&nbsp; &nbsp; &nbsp; &nbsp; Back</a>
</div>
{% endif %}
</div>

{% endblock %}